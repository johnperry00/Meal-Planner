<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Menu</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 0; /* Remove default body margin */
            display: flex;
            flex-direction: column;
            min-height: 100vh; /* Ensure full viewport height */
        }

        .container {
            display: grid;
            grid-template-columns: repeat(7, 1fr) 3fr;
            gap: 10px;
            padding: 10px;
            flex-grow: 1; /* Allow container to expand to fill available space */
        }

        .menu-container {
            grid-column: 1 / 8;
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }

        .day {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
        }

        .meal-slot {
            border: 1px dashed #eee;
            padding: 5px;
            min-height: 40px;
            margin-bottom: 5px;
            background-color: #f8f8f8;
            display: flex; /* Use flexbox for alignment */
            flex-direction: column; /* Stack ingredients vertically */
            align-items: center; /* Center ingredients horizontally */
        }

        .ingredient {
            background-color: #e0e0e0;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: move;
            margin: 2px; /* Add some space around ingredients */
            display: flex;
            align-items: center;
        }
        .ingredient span {
            cursor: default;
            margin-left: 5px;
            color: gray;
        }
        .ingredient input[type="text"] {
            border: none;
            background: transparent;
            width: auto;
            outline: none;
        }
        .add-ingredient {
            margin-top: 10px;
        }
        .ingredient-category-column {
            grid-column: 8 / 11;
            padding: 10px;
        }
        .category {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
        }
        .category h2 {
            margin-bottom: 5px;
        }
        .counter {
            margin-left: 5px;
            font-size: smaller;
            color: gray;
        }

        /* Responsive Styles */
        @media (max-width: 900px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-areas:
                    "menu"
                    "ingredients";
            }

            .menu-container {
                grid-area: menu;
                grid-template-columns: repeat(3, 1fr); /* Adjust as needed */
            }

            .ingredient-category-column {
                grid-area: ingredients;
                grid-column: 1;
            }
        }

        @media (max-width: 600px) {
            .menu-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <h1>Weekly Menu</h1>

    <div class="container">
        <div class="menu-container">
            </div>

        <div class="ingredient-category-column">
        </div>
    </div>


    <script>
        const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
        const categories = ["protein", "vegetables", "starch"];

        const menuContainer = document.querySelector(".menu-container");
        const ingredientColumn = document.querySelector(".ingredient-category-column");

        // Create days and meal slots dynamically
        days.forEach(dayName => {
            const day = document.createElement("div");
            day.classList.add("day");
            day.innerHTML = `<h2>${dayName}</h2>`;
            categories.forEach(category => {
                const mealSlot = document.createElement("div");
                mealSlot.classList.add("meal-slot");
                mealSlot.dataset.day = dayName.toLowerCase();
                mealSlot.dataset.category = category;
                day.appendChild(mealSlot);
            });
            menuContainer.appendChild(day);
        });

        // Create ingredient categories dynamically
        categories.forEach(categoryName => {
            const categoryDiv = document.createElement("div");
            categoryDiv.classList.add("category");
            categoryDiv.innerHTML = `<h2><span class="math-inline">\{categoryName\.charAt\(0\)\.toUpperCase\(\) \+ categoryName\.slice\(1\)\}</h2\><div class\="ingredient\-list" id\="</span>{categoryName}-list"></div><div class="add-ingredient"><input type="text" id="add-${categoryName}" placeholder="Add <span class="math-inline">\{categoryName\.charAt\(0\)\.toUpperCase\(\) \+ categoryName\.slice\(1\)\}"\><button onclick\="addIngredient\('</span>{categoryName}')">Add</button></div>`;
            ingredientColumn.appendChild(categoryDiv);
        });

        const ingredientLists = {
            protein: document.getElementById("protein-list"),
            vegetables: document.getElementById("vegetables-list"),
            starch: document.getElementById("starch-list")
        };


        function addIngredient(category) {
            const input = document.getElementById(`add-${category}`);
            const ingredientName = input.value.trim();

            if (ingredientName !== "") {
                const newList = ingredientLists[category];
                const newIngredient = createIngredientElement(ingredientName, category);
                newList.appendChild(newIngredient);
                input.value = "";
            }
        }

        function createIngredientElement(ingredientName, category) {
            const newIngredient = document.createElement('div');
            newIngredient.classList.add('ingredient');
            newIngredient.draggable = true;
            newIngredient.dataset.ingredient = ingredientName;
            newIngredient.dataset.category = category;

            const span = document.createElement('span');
            span.textContent = ingredientName;
            newIngredient.appendChild(span);

            const deleteSpan = document.createElement('span');
            deleteSpan.textContent = "x";
            deleteSpan.classList.add('delete');
            deleteSpan.addEventListener('click', deleteIngredient);
            newIngredient.appendChild(deleteSpan);

            newIngredient.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', JSON.stringify({ ingredient: newIngredient.dataset.ingredient, category: newIngredient.dataset.category }));
            });
            return newIngredient;
        }

        function deleteIngredient(event) {
            const ingredient = event.target.parentNode;
            ingredient.remove();
        }

        // Drag and Drop
        const mealSlots = document.querySelectorAll('.meal-slot');
        const ingredientListsArray = Object.values(ingredientLists); // Convert to array

        ingredientListsArray.forEach(list => {
            list.addEventListener('dragover', (e) => e.preventDefault());
            list.addEventListener('drop', (e) => {
                e.preventDefault();
                const ingredientData = JSON.parse(e.dataTransfer.getData('text/plain'));
                const newIngredient = createIngredientElement(ingredientData.ingredient, ingredientData.category);
                list.appendChild(newIngredient);
            });
        });

        mealSlots.forEach(mealSlot => {
            mealSlot.addEventListener('dragover', (e) => e.preventDefault());
            mealSlot.addEventListener('drop', (e) => {
                e.preventDefault();
                const ingredientData = JSON.parse(e.dataTransfer.getData('text/plain'));
                const newIngredient = createIngredientElement(ingredientData.ingredient, ingredientData.category);
                mealSlot.appendChild(newIngredient);
                updateCounter(ingredientData.ingredient);
            });
        });

        function updateCounter(ingredientName) {
            const ingredients = document.querySelectorAll('.ingredient');
            let count = 0;
            ingredients.forEach(ingredient => {
                if (ingredient.dataset.ingredient === ingredientName) {
                    count++;
                }
            });

            // Update or create counter element
            let counter = null;
            const existingCounter = document.querySelector(`.counter[data-ingredient="${ingredientName}"]`);
            if (existingCounter) {
                counter = existingCounter;
            } else {
                counter = document.createElement('span');
